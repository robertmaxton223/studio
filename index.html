<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>মানি হান্ট - আয় করুন সহজেই</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
        import { getFirestore, doc, setDoc, getDoc, updateDoc, increment, collection, query, where, getDocs, onSnapshot, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAvqIn229gt2_pZNmSXQrI1LQQRmJcrhME",
            authDomain: "money--hunt-test.firebaseapp.com",
            databaseURL: "https://money--hunt-test-default-rtdb.firebaseio.com",
            projectId: "money--hunt-test",
            storageBucket: "money--hunt-test.appspot.com",
            messagingSenderId: "322666407843",
            appId: "1:322666407843:web:6857fec8d064c0add25c16",
            measurementId: "G-CNWHF1KTRR"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);
        
        // Make Firebase available globally
        window.firebaseApp = app;
        window.firebaseDb = db;
        window.firebaseDoc = doc;
        window.firebaseSetDoc = setDoc;
        window.firebaseGetDoc = getDoc;
        window.firebaseUpdateDoc = updateDoc;
        window.firebaseIncrement = increment;
        window.firebaseCollection = collection;
        window.firebaseQuery = query;
        window.firebaseWhere = where;
        window.firebaseGetDocs = getDocs;
        window.firebaseOnSnapshot = onSnapshot;
        window.firebaseAddDoc = addDoc;
        window.firebaseServerTimestamp = serverTimestamp;
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'SolaimanLipi', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #333;
            min-height: 100vh;
            padding: 10px;
            overflow-x: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .page {
            display: none;
            width: 100%;
            max-width: 400px;
        }
        
        .active-page {
            display: block;
        }
        
        /* Common Header Styles for All Pages */
        .page-header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            animation: slideInDown 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }
        
        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, #3498db, #2ecc71);
        }
        
        .page-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3498db, #2ecc71);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            margin-right: 12px;
            border: 3px solid white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            animation: pulse 2s infinite;
            background-size: cover;
            background-position: center;
        }
        
        .page-user-info {
            flex: 1;
        }
        
        .page-user-name {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
        }
        
        .page-user-id {
            font-size: 12px;
            color: #7f8c8d;
        }
        
        .page-balance-card {
            background: linear-gradient(135deg, #3498db, #2ecc71);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 12px;
            color: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            text-align: center;
            animation: slideInUp 0.8s ease-out 0.2s both;
            position: relative;
            overflow: hidden;
        }
        
        .page-balance-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            animation: shine 6s infinite linear;
        }
        
        .page-balance-label {
            font-size: 14px;
            margin-bottom: 6px;
            opacity: 0.9;
        }
        
        .page-balance-amount {
            font-size: 26px;
            font-weight: 700;
            position: relative;
            text-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .page-stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 12px;
        }
        
        .page-stat-box {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            padding: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: all 0.3s ease;
            animation: slideInUp 0.8s ease-out 0.4s both;
            position: relative;
            overflow: hidden;
        }
        
        .page-stat-box:nth-child(1) { animation-delay: 0.4s; }
        .page-stat-box:nth-child(2) { animation-delay: 0.6s; }
        
        .page-stat-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, #3498db, #2ecc71);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
        }
        
        .page-stat-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .page-stat-box:hover::before {
            transform: scaleX(1);
        }
        
        .page-stat-icon {
            font-size: 20px;
            color: #3498db;
            margin-bottom: 6px;
        }
        
        .page-stat-label {
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 4px;
        }
        
        .page-stat-value {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        /* Notice Page Styles */
        .notice-container {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
            padding: 20px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-height: 95vh;
            overflow-y: auto;
            animation: fadeInScale 0.8s ease-out;
        }
        
        .header-section {
            margin-bottom: 15px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .notification-icon {
            font-size: 50px;
            margin-bottom: 5px;
            display: inline-block;
            animation: pulse 2s infinite;
            color: #3498db;
            filter: drop-shadow(0 5px 10px rgba(52, 152, 219, 0.3));
        }
        
        .notice-title {
            color: #2c3e50;
            font-size: 26px;
            font-weight: 700;
            text-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-top: 5px;
        }
        
        .welcome-text {
            font-size: 20px;
            color: #3498db;
            margin-bottom: 15px;
            font-weight: bold;
            animation: slideIn 1s ease-out;
            text-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .notice-content {
            text-align: right;
            direction: rtl;
            margin-bottom: 15px;
            line-height: 1.6;
            font-size: 15px;
            background: rgba(52, 152, 219, 0.1);
            padding: 12px;
            border-radius: 10px;
            border-right: 4px solid #3498db;
            animation: slideInRight 1s ease-out;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .bonus-section {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 12px;
            border-radius: 10px;
            margin: 12px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            animation: slideInLeft 1s ease-out;
        }
        
        .bonus-title {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 18px;
            position: relative;
            display: inline-block;
        }
        
        .bonus-title::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 10%;
            width: 80%;
            height: 2px;
            background: linear-gradient(to right, #3498db, #2ecc71);
            border-radius: 2px;
        }
        
        .bonus-list {
            text-align: right;
            direction: rtl;
        }
        
        .bonus-item {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding: 8px 5px;
            border-radius: 8px;
            transition: all 0.3s ease;
            animation: fadeInUp 0.5s ease-out;
            animation-fill-mode: both;
        }
        
        .bonus-item:nth-child(1) { animation-delay: 0.2s; }
        .bonus-item:nth-child(2) { animation-delay: 0.4s; }
        .bonus-item:nth-child(3) { animation-delay: 0.6s; }
        
        .bonus-item:hover {
            background: rgba(52, 152, 219, 0.1);
            transform: translateX(-5px);
        }
        
        .bonus-text {
            font-size: 15px;
            font-weight: 500;
            padding-right: 15px;
            line-height: 1.4;
        }
        
        .bonus-icon {
            color: #27ae60;
            font-size: 20px;
            background: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .features {
            text-align: right;
            direction: rtl;
            margin: 12px 0;
            animation: fadeIn 1.5s ease-out;
        }
        
        .feature-item {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding: 6px 0;
        }
        
        .feature-icon {
            margin-left: 10px;
            color: #e74c3c;
            font-size: 18px;
        }
        
        .feature-text {
            font-size: 14px;
            line-height: 1.4;
        }
        
        .understand-btn {
            background: linear-gradient(to right, #3498db, #2ecc71);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.4);
            font-weight: bold;
            position: relative;
            overflow: hidden;
            letter-spacing: 1px;
            width: 100%;
            max-width: 180px;
            margin-top: 10px;
            animation: bounceIn 1s ease-out 1.5s both;
        }
        
        .understand-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(52, 152, 219, 0.5);
        }
        
        .understand-btn:active {
            transform: translateY(0);
        }
        
        .footer-text {
            margin-top: 12px;
            font-size: 11px;
            color: #7f8c8d;
            text-align: center;
            animation: fadeIn 2s ease-out;
        }
        
        /* Home Page Styles */
        .home-container {
            width: 100%;
            max-width: 400px;
            padding-bottom: 70px;
            animation: fadeInScale 0.8s ease-out;
        }
        
        /* FIXED Referral Section */
        .referral-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            animation: slideInUp 0.8s ease-out 0.8s both;
            position: relative;
            overflow: hidden;
        }
        
        .referral-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, #3498db, #2ecc71);
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .referral-desc {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 12px;
            text-align: center;
            line-height: 1.4;
            font-weight: 500;
        }
        
        .referral-link-box {
            background: #f8f9fa;
            border: 1px dashed #3498db;
            border-radius: 10px;
            padding: 12px;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
            margin-bottom: 10px;
        }
        
        .referral-link-box:hover {
            border-style: solid;
            transform: scale(1.02);
            animation: none;
        }
        
        .referral-link {
            flex: 1;
            font-size: 14px;
            color: #2c3e50;
            word-break: break-all;
            font-weight: 600;
        }
        
        .copy-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            font-weight: 600;
        }
        
        .copy-btn:hover {
            background: #2980b9;
            transform: scale(1.05);
        }
        
        /* Tasks Page Styles */
        .tasks-container {
            width: 100%;
            max-width: 400px;
            padding-bottom: 70px;
            animation: fadeInScale 0.8s ease-out;
        }
        
        .ad-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            animation: slideInUp 0.8s ease-out 0.6s both;
            position: relative;
            overflow: hidden;
            text-align: center;
        }
        
        .ad-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, #3498db, #2ecc71);
        }
        
        .ad-icon {
            font-size: 60px;
            color: #e74c3c;
            margin-bottom: 15px;
            animation: pulse 2s infinite;
            filter: drop-shadow(0 5px 10px rgba(231, 76, 60, 0.3));
        }
        
        .ad-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .ad-desc {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 12px;
            text-align: center;
            line-height: 1.4;
            font-weight: 500;
        }
        
        .reward-info {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            font-size: 16px;
            font-weight: 600;
            color: #e74c3c;
        }
        
        .reward-icon {
            margin-right: 8px;
            font-size: 20px;
        }
        
        .watch-ad-btn {
            background: linear-gradient(to right, #3498db, #2ecc71);
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.4);
            font-weight: bold;
            position: relative;
            overflow: hidden;
            letter-spacing: 1px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .watch-ad-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(52, 152, 219, 0.5);
        }
        
        .watch-ad-btn:active {
            transform: translateY(0);
        }
        
        /* Footer Navigation */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            z-index: 100;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            animation: slideInUp 0.8s ease-out 1s both;
        }
        
        .footer-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #7f8c8d;
            font-size: 10px;
            transition: all 0.3s ease;
            padding: 4px;
            border-radius: 6px;
            position: relative;
        }
        
        .footer-item.active {
            color: #3498db;
            background: rgba(52, 152, 219, 0.1);
        }
        
        .footer-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background: #3498db;
            transition: width 0.3s ease;
        }
        
        .footer-item.active::before {
            width: 20px;
        }
        
        .footer-icon {
            font-size: 16px;
            margin-bottom: 2px;
            transition: all 0.3s ease;
        }
        
        .footer-item:hover .footer-icon {
            transform: translateY(-2px);
        }
        
        /* Enhanced Animations */
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                opacity: 1;
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        /* Floating elements for background */
        .floating {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
            z-index: -1;
        }
        
        .floating:nth-child(1) {
            width: 80px;
            height: 80px;
            top: 10%;
            left: 5%;
            animation-delay: 0s;
        }
        
        .floating:nth-child(2) {
            width: 60px;
            height: 60px;
            top: 70%;
            left: 10%;
            animation-delay: 2s;
        }
        
        .floating:nth-child(3) {
            width: 100px;
            height: 100px;
            top: 20%;
            right: 5%;
            animation-delay: 4s;
        }
        
        .floating:nth-child(4) {
            width: 50px;
            height: 50px;
            top: 80%;
            right: 8%;
            animation-delay: 1s;
        }
        
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        /* Scrollbar Styling */
        .notice-container::-webkit-scrollbar {
            width: 4px;
        }
        
        .notice-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 8px;
        }
        
        .notice-container::-webkit-scrollbar-thumb {
            background: #3498db;
            border-radius: 8px;
        }
        
        .notice-container::-webkit-scrollbar-thumb:hover {
            background: #2980b9;
        }
        
        /* Custom Alert Styles */
        .custom-alert {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #27ae60;
            color: white;
            padding: 12px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 10000;
            font-weight: 600;
            max-width: 90%;
            text-align: center;
            animation: slideInDown 0.3s ease-out;
        }
        
        .custom-alert.error {
            background: #e74c3c;
        }
        
        .custom-alert.info {
            background: #3498db;
        }
        
        /* Responsive Design */
        @media (max-width: 400px) {
            body {
                padding: 5px;
            }
            
            .notice-container, .home-container, .tasks-container {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Floating background elements -->
    <div class="floating"></div>
    <div class="floating"></div>
    <div class="floating"></div>
    <div class="floating"></div>
    
    <!-- Notice Page -->
    <div id="noticePage" class="page active-page">
        <div class="notice-container">
            <div class="header-section">
                <div class="notification-icon">
                    <i class="fas fa-bell"></i>
                </div>
                <div class="notice-title">নোটিস</div>
            </div>
            
            <div class="welcome-text">স্বাগতম!</div>
            
            <div class="notice-content">
                <i class="fas fa-handshake" style="color: #3498db; margin-left: 10px;"></i>
                আসসালামু আলাইকুম, সততার সাথে পেমেন্ট করছি। নিয়ম মেনে কাজ করলে ১০০% পেমেন্ট পাবেন ইনশাআল্লাহ
            </div>
            
            <div class="bonus-section">
                <div class="bonus-title">বোনাস ও ইনকাম</div>
                <div class="bonus-list">
                    <div class="bonus-item">
                        <span class="bonus-text">জয়েন বোনাস: ৫০ টাকা</span>
                        <div class="bonus-icon">
                            <i class="fas fa-gift"></i>
                        </div>
                    </div>
                    <div class="bonus-item">
                        <span class="bonus-text">প্রতি রেফারে: ১৫০ টাকা</span>
                        <div class="bonus-icon">
                            <i class="fas fa-user-friends"></i>
                        </div>
                    </div>
                    <div class="bonus-item">
                        <span class="bonus-text">প্রতি বিজ্ঞাপনে: ২০ টাকা</span>
                        <div class="bonus-icon">
                            <i class="fas fa-ad"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="features">
                <div class="feature-item">
                    <span class="feature-text">প্রতিদিন বিজ্ঞাপন দেখার সুযোগ</span>
                    <div class="feature-icon">
                        <i class="fas fa-bullhorn"></i>
                    </div>
                </div>
                <div class="feature-item">
                    <span class="feature-text">কোন ইনভেস্টমেন্ট নেই, সম্পূর্ণ ফ্রি</span>
                    <div class="feature-icon">
                        <i class="fas fa-lock-open"></i>
                    </div>
                </div>
            </div>
            
            <div class="notice-content">
                <i class="fas fa-info-circle" style="color: #3498db; margin-left: 10px;"></i>
                এই সাইটে কোন ইনভেস্ট করতে হবে না, সম্পূর্ণ ফ্রিতে ইনকাম করতে পারবেন। ধন্যবাদ।
            </div>
            
            <button class="understand-btn" id="understandBtn">
                <i class="fas fa-check-circle" style="margin-left: 8px;"></i>
                বুঝেছি
            </button>
            
            <div class="footer-text">
                <i class="far fa-copyright"></i> ২০২৩ ইনকাম অ্যাপ | সকল অধিকার সংরক্ষিত
            </div>
        </div>
    </div>

    <!-- Home Page -->
    <div id="homePage" class="page">
        <div class="home-container">
            <!-- Header with User Info -->
            <div class="page-header">
                <div class="page-avatar" id="userAvatar">
                    <i class="fas fa-user" id="defaultAvatar"></i>
                </div>
                <div class="page-user-info">
                    <div class="page-user-name" id="userName">লোড হচ্ছে...</div>
                    <div class="page-user-id" id="userId">ID: লোড হচ্ছে...</div>
                </div>
            </div>
            
            <!-- Balance Card -->
            <div class="page-balance-card">
                <div class="page-balance-label">আপনার মোট আয়</div>
                <div class="page-balance-amount" id="totalEarnings">০ টাকা</div>
            </div>
            
            <!-- Stats Container -->
            <div class="page-stats-container">
                <div class="page-stat-box">
                    <div class="page-stat-icon">
                        <i class="fas fa-ad"></i>
                    </div>
                    <div class="page-stat-label">আজকে বিজ্ঞাপন দেখেছেন</div>
                    <div class="page-stat-value" id="todayAds">০</div>
                </div>
                
                <div class="page-stat-box">
                    <div class="page-stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="page-stat-label">মোট রেফার</div>
                    <div class="page-stat-value" id="totalReferrals">০</div>
                </div>
            </div>
            
            <!-- FIXED Referral Section -->
            <div class="referral-section">
                <div class="section-title">বন্ধুকে রেফার করুন এবং আয় করুন</div>
                <div class="referral-desc">
                    আপনার রেফার লিংকটি শেয়ার করুন এবং আপনার বন্ধুদের আমন্ত্রণ করুন। 
                    আপনার বন্ধু সাইন আপ করলে আপনি <span style="color: #e74c3c; font-weight: 600;">১৫০ টাকা</span> বোনাস পাবেন।
                </div>
                
                <div class="referral-link-box">
                    <div class="referral-link" id="referralLink">লোড হচ্ছে...</div>
                    <button class="copy-btn" id="copyBtn">
                        <i class="fas fa-copy"></i> কপি
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Footer Navigation -->
        <div class="footer">
            <a href="#" class="footer-item active" data-page="homePage">
                <i class="fas fa-home footer-icon"></i>
                <span>হোম</span>
            </a>
            <a href="#" class="footer-item" data-page="tasksPage">
                <i class="fas fa-tasks footer-icon"></i>
                <span>টাস্ক</span>
            </a>
            <a href="#" class="footer-item" data-page="withdrawPage">
                <i class="fas fa-wallet footer-icon"></i>
                <span>উইথড্র</span>
            </a>
            <a href="#" class="footer-item" data-page="historyPage">
                <i class="fas fa-history footer-icon"></i>
                <span>হিস্ট্রি</span>
            </a>
            <a href="#" class="footer-item" data-page="supportPage">
                <i class="fas fa-headset footer-icon"></i>
                <span>সাপোর্ট</span>
            </a>
        </div>
    </div>

    <!-- Tasks Page -->
    <div id="tasksPage" class="page">
        <div class="tasks-container">
            <!-- Header with User Info -->
            <div class="page-header">
                <div class="page-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="page-user-info">
                    <div class="page-user-name" id="tasksUserName">লোড হচ্ছে...</div>
                    <div class="page-user-id" id="tasksUserId">ID: লোড হচ্ছে...</div>
                </div>
            </div>
            
            <!-- Balance Card -->
            <div class="page-balance-card">
                <div class="page-balance-label">আপনার মোট আয়</div>
                <div class="page-balance-amount" id="tasksTotalEarnings">০ টাকা</div>
            </div>
            
            <!-- Stats Container -->
            <div class="page-stats-container">
                <div class="page-stat-box">
                    <div class="page-stat-icon">
                        <i class="fas fa-ad"></i>
                    </div>
                    <div class="page-stat-label">আজকে বিজ্ঞাপন দেখেছেন</div>
                    <div class="page-stat-value" id="tasksTodayAds">০</div>
                </div>
                
                <div class="page-stat-box">
                    <div class="page-stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="page-stat-label">মোট রেফার</div>
                    <div class="page-stat-value" id="tasksTotalReferrals">০</div>
                </div>
            </div>
            
            <!-- Advertisement Section -->
            <div class="ad-section">
                <div class="ad-icon">
                    <i class="fas fa-ad"></i>
                </div>
                <div class="ad-title">বিজ্ঞাপন দেখুন</div>
                <div class="ad-desc">প্রতি বিজ্ঞাপন দেখলে ২০ টাকা করে উপার্জন করুন</div>
                
                <div class="reward-info">
                    <div class="reward-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="reward-text">রিওয়ার্ড: ২০ TK</div>
                </div>
                
                <button class="watch-ad-btn" id="watchAdBtn">
                    <i class="fas fa-play-circle"></i>
                    বিজ্ঞাপন দেখুন
                </button>
            </div>
        </div>
        
        <!-- Footer Navigation -->
        <div class="footer">
            <a href="#" class="footer-item" data-page="homePage">
                <i class="fas fa-home footer-icon"></i>
                <span>হোম</span>
            </a>
            <a href="#" class="footer-item active" data-page="tasksPage">
                <i class="fas fa-tasks footer-icon"></i>
                <span>টাস্ক</span>
            </a>
            <a href="#" class="footer-item" data-page="withdrawPage">
                <i class="fas fa-wallet footer-icon"></i>
                <span>উইথড্র</span>
            </a>
            <a href="#" class="footer-item" data-page="historyPage">
                <i class="fas fa-history footer-icon"></i>
                <span>হিস্ট্রি</span>
            </a>
            <a href="#" class="footer-item" data-page="supportPage">
                <i class="fas fa-headset footer-icon"></i>
                <span>সাপোর্ট</span>
            </a>
        </div>
    </div>

    <script>
        // Telegram Web App Integration
        let tg = window.Telegram?.WebApp;
        
        if (tg) {
            tg.ready();
            tg.expand();
            console.log('Telegram Web App initialized');
        } else {
            console.log('Telegram Web App not available, using demo mode');
        }

        // Firebase functions
        let userId = null;
        let userRef = null;

        // Page Navigation
        document.getElementById('understandBtn').addEventListener('click', function() {
            document.getElementById('noticePage').classList.remove('active-page');
            document.getElementById('homePage').classList.add('active-page');
            initializeApp();
        });

        // Footer Navigation
        document.querySelectorAll('.footer-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Get target page
                const targetPage = this.getAttribute('data-page');
                
                // Update active states
                document.querySelectorAll('.footer-item').forEach(navItem => {
                    navItem.classList.remove('active');
                });
                this.classList.add('active');
                
                // Hide all pages
                document.querySelectorAll('.page').forEach(page => {
                    page.classList.remove('active-page');
                });
                
                // Show target page
                document.getElementById(targetPage).classList.add('active-page');
                
                // Initialize page if needed
                if (targetPage === 'homePage') {
                    updateHomePage();
                } else if (targetPage === 'tasksPage') {
                    updateTasksPage();
                }
            });
        });

        // Watch ad button
        document.getElementById('watchAdBtn').addEventListener('click', function() {
            loadMonetagAd();
        });

        // Copy referral link
        document.getElementById('copyBtn').addEventListener('click', function() {
            const referralLink = document.getElementById('referralLink').textContent;
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(referralLink).then(function() {
                    showMessage('রেফারেল লিংক কপি করা হয়েছে!', 'success');
                }).catch(function() {
                    fallbackCopyText(referralLink);
                });
            } else {
                fallbackCopyText(referralLink);
            }
        });

        // Fallback copy function
        function fallbackCopyText(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try {
                document.execCommand('copy');
                showMessage('রেফারেল লিংক কপি করা হয়েছে!', 'success');
            } catch (err) {
                showMessage('কপি করতে সমস্যা হয়েছে!', 'error');
            }
            document.body.removeChild(textArea);
        }

        // Initialize the application
        async function initializeApp() {
            await loadTelegramUser();
            await initializeFirebaseUser();
            updateHomePage();
        }

        // Load Telegram user data - FIXED
        async function loadTelegramUser() {
            try {
                if (tg && tg.initDataUnsafe && tg.initDataUnsafe.user) {
                    const user = tg.initDataUnsafe.user;
                    userId = user.id.toString();
                    
                    // Display user name
                    const userName = `${user.first_name || ''} ${user.last_name || ''}`.trim() || 'ইউজার';
                    document.getElementById('userName').textContent = userName;
                    document.getElementById('userId').textContent = `ID: ${userId}`;
                    document.getElementById('tasksUserName').textContent = userName;
                    document.getElementById('tasksUserId').textContent = `ID: ${userId}`;
                    
                    // Display profile photo if available
                    if (user.photo_url) {
                        document.getElementById('userAvatar').style.backgroundImage = `url(${user.photo_url})`;
                        document.getElementById('defaultAvatar').style.display = 'none';
                    }
                    
                    console.log('Telegram user loaded:', userName, userId);
                } else {
                    // Fallback for non-Telegram environment
                    userId = 'demo_' + Math.random().toString(36).substr(2, 9);
                    document.getElementById('userName').textContent = 'ডেমো ইউজার';
                    document.getElementById('userId').textContent = `ID: ${userId}`;
                    document.getElementById('tasksUserName').textContent = 'ডেমো ইউজার';
                    document.getElementById('tasksUserId').textContent = `ID: ${userId}`;
                    console.log('Using demo user:', userId);
                }
            } catch (error) {
                console.error('Error loading Telegram user:', error);
                // Fallback
                userId = 'error_' + Math.random().toString(36).substr(2, 9);
                document.getElementById('userName').textContent = 'ইউজার';
                document.getElementById('userId').textContent = `ID: ${userId}`;
                document.getElementById('tasksUserName').textContent = 'ইউজার';
                document.getElementById('tasksUserId').textContent = `ID: ${userId}`;
            }
        }

        // Initialize Firebase user - FIXED
        async function initializeFirebaseUser() {
            if (!userId) {
                console.error('No user ID available');
                return;
            }

            try {
                userRef = window.firebaseDoc(window.firebaseDb, "users", userId);
                const userSnap = await window.firebaseGetDoc(userRef);
                
                if (!userSnap.exists()) {
                    // Create new user with 50 Taka bonus - FIXED
                    const userName = document.getElementById('userName').textContent;
                    await window.firebaseSetDoc(userRef, {
                        name: userName,
                        telegramId: userId,
                        totalEarnings: 50, // 50 Taka join bonus
                        todayAds: 0,
                        totalReferrals: 0,
                        lastAdReset: new Date(),
                        joinDate: new Date(),
                        completedTasks: {}
                    });
                    
                    console.log('New user created with 50 Taka bonus');
                    updateUserUI({ totalEarnings: 50, todayAds: 0, totalReferrals: 0 });
                    
                    // Check for referral code in URL
                    const urlParams = new URLSearchParams(window.location.search);
                    const refCode = urlParams.get('ref');
                    
                    if (refCode && refCode !== userId) {
                        // Add 150 Taka to referrer
                        const referrerRef = window.firebaseDoc(window.firebaseDb, "users", refCode);
                        const referrerSnap = await window.firebaseGetDoc(referrerRef);
                        
                        if (referrerSnap.exists()) {
                            await window.firebaseUpdateDoc(referrerRef, {
                                totalEarnings: window.firebaseIncrement(150),
                                totalReferrals: window.firebaseIncrement(1)
                            });
                            
                            console.log('Referral bonus added to referrer');
                            showMessage('রেফারেল বোনাস যোগ করা হয়েছে!', 'success');
                        }
                    }
                } else {
                    // Update existing user data
                    const userData = userSnap.data();
                    updateUserUI(userData);
                    console.log('Existing user data loaded:', userData);
                }
                
                // Generate referral link - FIXED
                generateReferralLink();
                
                // Set up real-time listener
                window.firebaseOnSnapshot(userRef, (doc) => {
                    if (doc.exists()) {
                        const userData = doc.data();
                        updateUserUI(userData);
                    }
                });
                
            } catch (error) {
                console.error('Error initializing Firebase user:', error);
                showMessage('ডেটা লোড করতে সমস্যা হয়েছে!', 'error');
            }
        }

        // Generate referral link - FIXED
        function generateReferralLink() {
            if (userId) {
                const referralLink = `https://t.me/hojoborol321_bot?start=${userId}`;
                document.getElementById('referralLink').textContent = referralLink;
                console.log('Referral link generated:', referralLink);
            }
        }

        // Update user UI
        function updateUserUI(data) {
            if (data.totalEarnings !== undefined) {
                document.getElementById('totalEarnings').textContent = `${data.totalEarnings} টাকা`;
                document.getElementById('tasksTotalEarnings').textContent = `${data.totalEarnings} টাকা`;
            }
            if (data.todayAds !== undefined) {
                document.getElementById('todayAds').textContent = data.todayAds;
                document.getElementById('tasksTodayAds').textContent = data.todayAds;
            }
            if (data.totalReferrals !== undefined) {
                document.getElementById('totalReferrals').textContent = data.totalReferrals;
                document.getElementById('tasksTotalReferrals').textContent = data.totalReferrals;
            }
        }

        // Update home page
        function updateHomePage() {
            // Additional home page updates if needed
            console.log('Home page updated');
        }

        // Update tasks page
        function updateTasksPage() {
            // Additional tasks page updates if needed
            console.log('Tasks page updated');
        }

        // Load Monetag ad - COMPLETELY FIXED
        function loadMonetagAd() {
            const adBtn = document.getElementById('watchAdBtn');
            const originalText = adBtn.innerHTML;
            
            // Show loading state
            adBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> লোড হচ্ছে...';
            adBtn.disabled = true;

            try {
                // Remove existing script if any
                const existingScript = document.querySelector('script[src="//libtl.com/sdk.js"]');
                if (existingScript) {
                    existingScript.remove();
                }

                // Create and load Monetag script
                const script = document.createElement('script');
                script.src = '//libtl.com/sdk.js';
                script.setAttribute('data-zone', '10065083');
                script.setAttribute('data-sdk', 'show_10065083');
                
                script.onload = function() {
                    console.log('Monetag ad script loaded successfully');
                    showMessage('বিজ্ঞাপন লোড হয়েছে! বিজ্ঞাপন দেখানো হচ্ছে...', 'success');
                    
                    // Simulate ad completion after 30 seconds
                    setTimeout(() => {
                        completeAdWatch();
                    }, 30000);
                };
                
                script.onerror = function() {
                    console.error('Failed to load Monetag script');
                    showMessage('বিজ্ঞাপন লোড করতে সমস্যা হয়েছে! পরে আবার চেষ্টা করুন।', 'error');
                    adBtn.innerHTML = originalText;
                    adBtn.disabled = false;
                };
                
                document.body.appendChild(script);
                
            } catch (error) {
                console.error('Error loading ad:', error);
                showMessage('বিজ্ঞাপন লোড করতে সমস্যা হয়েছে!', 'error');
                adBtn.innerHTML = originalText;
                adBtn.disabled = false;
            }
        }

        // Complete ad watch and add money - FIXED
        async function completeAdWatch() {
            const adBtn = document.getElementById('watchAdBtn');
            const originalText = adBtn.innerHTML;
            
            try {
                if (userRef) {
                    await window.firebaseUpdateDoc(userRef, {
                        totalEarnings: window.firebaseIncrement(20),
                        todayAds: window.firebaseIncrement(1)
                    });
                    
                    showMessage('বিজ্ঞাপন দেখার জন্য আপনাকে ২০ টাকা দেওয়া হয়েছে! 🎉', 'success');
                    console.log('20 Taka added for watching ad');
                } else {
                    showMessage('টাকা যোগ করতে সমস্যা হয়েছে!', 'error');
                }
            } catch (error) {
                console.error('Error updating earnings:', error);
                showMessage('টাকা যোগ করতে সমস্যা হয়েছে!', 'error');
            }
            
            // Reset button
            adBtn.innerHTML = originalText;
            adBtn.disabled = false;
        }

        // Show message function
        function showMessage(message, type = 'info') {
            // Remove existing messages
            const existingMessages = document.querySelectorAll('.custom-alert');
            existingMessages.forEach(msg => msg.remove());
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `custom-alert ${type}`;
            alertDiv.textContent = message;
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.parentNode.removeChild(alertDiv);
                }
            }, 4000);
        }

        // Auto initialize if no notice page
        document.addEventListener('DOMContentLoaded', function() {
            // Check if we're already on home page (bypass notice)
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('skipNotice') || !document.getElementById('noticePage').classList.contains('active-page')) {
                document.getElementById('noticePage').classList.remove('active-page');
                document.getElementById('homePage').classList.add('active-page');
                initializeApp();
            }
        });

    </script>
</body>
</html>
